logger.info('Applying managed file init.gradle')
gradle.projectsLoaded {
    rootProject.allprojects {
        buildscript {
            repositories.matching {
                it.url.host == 'artifactory.persgroep.cloud'
            }.all {
                credentials {
                    username = System.getenv("ARTIFACTORY_USER")
                    password = System.getenv("ARTIFACTORY_PASSWORD")
                }
            }
        }
        repositories.matching {
            it.url.host == 'artifactory.persgroep.cloud'
        }.all {
            credentials {
                username = System.getenv("ARTIFACTORY_USER")
                password = System.getenv("ARTIFACTORY_PASSWORD")
            }
        }
        apply plugin: 'maven-publish'
        publishing{
            repositories.matching {
                it.url.host == 'artifactory.persgroep.cloud'
            }.all {
                credentials {
                    username = System.getenv("ARTIFACTORY_USER")
                    password = System.getenv("ARTIFACTORY_PASSWORD")
                }
            }
        }
    }
}